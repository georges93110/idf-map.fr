<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <meta name="description" content="Site internet de la map Ile-de-France pour Euro Truck Simulator 2."/>
  <meta property="og:locale" content="fr_FR"/>
  <meta property="og:type" content="website"/>
  <meta property="og:site_name" content="Ile-de-France Map - Accueil"/>
  <meta property="og:title" content="Ile-de-France Map"/>
  <meta property="og:description" content="Site internet de la map Ile-de-France pour Euro Truck Simulator 2."/>
  <meta property="og:url" content="https://idf-map.fr/"/>
  <meta property="og:image" content="https://idf-map.fr/images/idf_logo_new.png"/>
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:title" content="Ile-de-France Map - Accueil"/>
  <meta name="twitter:description" content="Site internet de la map Ile-de-France pour Euro Truck Simulator 2."/>
  <meta name="twitter:image" content="https://idf-map.fr/images/idf_logo_new.png"/>
  <style>
    html[data-app-ready="0"] {
      background:#0b0b0b;
    }
    html[data-app-ready="0"] body {
      opacity:0 !important;
      visibility:hidden !important;
      overflow:hidden !important;
    }
  </style>
  <script>
    (function setupAppReadyGate() {
      const root = document.documentElement;
      root.setAttribute("data-app-ready", "0");
      let done = false;
      function reveal() {
        if (done) return;
        done = true;
        root.setAttribute("data-app-ready", "1");
      }
      window.__setAppReady = function __setAppReady(options) {
        const cfg = options && typeof options === "object" ? options : {};
        const minFrames = Math.max(4, Number(cfg.minFrames) || 8);
        const stableFrames = Math.max(2, Number(cfg.stableFrames) || 3);
        const maxFrames = Math.max(minFrames + stableFrames, Number(cfg.maxFrames) || 28);
        let frameCount = 0;
        let stableCount = 0;
        let previousKey = "";
        const step = () => {
          frameCount += 1;
          let layoutKey = "";
          const body = document.body;
          if (body) {
            const rect = body.getBoundingClientRect();
            layoutKey = [
              Math.round(rect.width),
              Math.round(rect.height),
              document.documentElement.scrollWidth,
              document.documentElement.scrollHeight
            ].join("x");
          }
          stableCount = layoutKey && layoutKey === previousKey ? stableCount + 1 : 0;
          previousKey = layoutKey;
          const enoughFrames = frameCount >= minFrames;
          const visuallyStable = stableCount >= stableFrames;
          const frameBudgetExceeded = frameCount >= maxFrames;
          if ((!enoughFrames || !visuallyStable) && !frameBudgetExceeded) {
            requestAnimationFrame(step);
            return;
          }
          reveal();
        };
        const start = () => requestAnimationFrame(step);
        if (document.fonts && document.fonts.ready) {
          Promise.race([
            document.fonts.ready.catch(() => {}),
            new Promise((resolve) => setTimeout(resolve, 1200))
          ]).finally(start);
          return;
        }
        start();
      };
      window.addEventListener("pageshow", reveal, { once: true });
      window.setTimeout(reveal, 7000);
    })();
  </script>
  <title>Île-de-France Map</title>
  <link rel="icon" type="image/png" href="images/idf_logo_new.png"/>
  <style>
    :root {
      --home-surface-1: #121212;
      --home-surface-2: #171717;
      --home-border: #2f2f2f;
      --home-text: #ececec;
      --home-muted: #c9c9c9;
      --home-manual-width: 450px;
    }

    .home-wrap {
      min-height: 100vh;
      box-sizing: border-box;
      padding: calc(var(--sitebar-height, 52px) + 14px) 14px 32px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .home-shell {
      width: fit-content;
      max-width: 100%;
      margin: 0 auto;
      display: grid;
      grid-template-columns: minmax(0, 1120px) 0px;
      justify-content: center;
      align-items: start;
      gap: 0;
      color: var(--home-text);
      font-family: "Inter", "Segoe UI", sans-serif;
      transition: grid-template-columns 240ms ease, gap 240ms ease;
    }

    .home-shell.is-manual-open {
      grid-template-columns: minmax(0, 1120px) var(--home-manual-width);
      gap: 16px;
    }

    .home-main {
      display: grid;
      gap: 16px;
      min-width: 0;
      width: min(1120px, 100%);
    }

    .home-hero {
      position: relative;
      overflow: hidden;
      border: 1px solid var(--home-border);
      border-radius: 14px;
      min-height: 300px;
      background: #171717;
      box-shadow: 0 18px 42px rgba(0, 0, 0, 0.35);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .home-hero::before {
      content: "";
      position: absolute;
      inset: 0;
      background-image: url("images/image1.webp");
      background-size: cover;
      background-position: center center;
      filter: saturate(0.95) contrast(1.02) brightness(0.62);
      transform: scale(1.03);
      z-index: 0;
    }

    .home-hero::after {
      content: "";
      position: absolute;
      inset: 0;
      z-index: 1;
      background:
        linear-gradient(90deg, rgba(10, 10, 10, 0.92) 0%, rgba(10, 10, 10, 0.82) 36%, rgba(10, 10, 10, 0.35) 63%, rgba(10, 10, 10, 0.14) 100%),
        linear-gradient(180deg, rgba(10, 10, 10, 0.28), rgba(10, 10, 10, 0.6));
      pointer-events: none;
    }

    .home-hero-content {
      position: relative;
      z-index: 2;
      display: grid;
      align-content: center;
      gap: 14px;
      padding: 24px 26px;
      width: min(760px, 100%);
      margin: 0 auto;
      justify-items: start;
      text-align: left;
    }

    .home-hero-heading {
      display: grid;
      gap: 14px;
      justify-items: center;
      text-align: center;
      width: 100%;
    }

    .home-version-pill {
      margin: 0 auto;
      width: fit-content;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      border: 1px solid #313131;
      border-radius: 999px;
      background: #1d1d1d;
      color: #ececec;
      font-size: 12px;
      font-weight: 800;
      letter-spacing: 0.02em;
      padding: 8px 12px;
    }

    .home-version-pill svg {
      width: 14px;
      height: 14px;
      fill: currentColor;
      flex: 0 0 auto;
    }

    .home-title {
      margin: 0;
      font-size: clamp(42px, 6.8vw, 54px);
      line-height: 0.98;
      letter-spacing: -0.02em;
      color: #ffffff;
      text-shadow: 0 6px 28px rgba(0, 0, 0, 0.45);
      text-align: center;
    }

    .home-title-logo {
      display: block;
      width: min(200px, 84vw);
      height: auto;
      filter: drop-shadow(0 6px 24px rgba(0, 0, 0, 0.45));
    }

    .home-cta-stack {
      display: grid;
      gap: 8px;
      width: min(680px, 100%);
      justify-self: center;
      justify-items: center;
      text-align: center;
    }

    .home-cta {
      min-height: 44px;
      border-radius: 10px;
      border: 1px solid transparent;
      color: #ececec;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      font-size: clamp(13px, 1.45vw, 15px);
      font-weight: 700;
      padding: 0 14px;
      transition: transform 160ms ease, box-shadow 160ms ease, border-color 160ms ease, background 160ms ease;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.32);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
    }

    .home-cta svg {
      width: 18px;
      height: 18px;
      flex: 0 0 auto;
      stroke: currentColor;
      fill: none;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
    }

    .home-cta:hover {
      transform: translateY(-1px);
    }

    .home-cta-auto {
      min-height: 54px;
      width: min(350px, 100%);
      gap: 12px;
      position: relative;
      justify-content: center;
      font-size: clamp(15px, 1.7vw, 19px);
      background: linear-gradient(145deg, #2f8c5a, #1f6440);
      border-color: #58ca8b;
      color: #f4fff8;
    }
    .home-cta-auto svg {
      width: 20px;
      height: 20px;
    }
    .home-cta-auto .site-icon-windows {
      fill: currentColor;
      stroke: none;
    }
    .home-cta-auto .home-cta-icon-pack {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      position: absolute;
      left: 14px;
      top: 50%;
      transform: translateY(-50%);
      padding: 6px 8px;
      border-radius: 8px;
      background: rgba(8, 31, 19, 0.28);
      border: 1px solid rgba(198, 247, 219, 0.28);
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.08);
      flex: 0 0 auto;
    }
    .home-cta-auto .home-cta-icon-sep {
      width: 1px;
      height: 14px;
      background: rgba(239, 255, 247, 0.45);
      flex: 0 0 1px;
    }
    .home-cta-auto .site-icon-download {
      width: 18px;
      height: 18px;
      flex: 0 0 18px;
    }
    .home-cta-auto .site-icon-windows {
      width: 16px;
      height: 16px;
      flex: 0 0 16px;
      opacity: 0.95;
    }
    .home-cta-auto .home-cta-loading-spinner {
      display: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      border: 2px solid rgba(244, 255, 248, 0.36);
      border-top-color: #f4fff8;
      animation: homeDownloadSpin 750ms linear infinite;
      box-sizing: border-box;
      flex: 0 0 16px;
    }
    .home-cta-auto span[data-i18n="download_button"] {
      line-height: 1;
    }
    .home-cta-auto[data-download-mode="manual"] .site-icon-windows,
    .home-cta-auto[data-download-mode="manual"] .home-cta-icon-sep {
      display: none;
    }
    .home-cta-auto.is-disabled-link {
      cursor: not-allowed;
      color: #d8dbde;
      border-color: #7a7f84;
      background: linear-gradient(145deg, #4a545d, #313941);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.28);
    }
    .home-cta-auto.is-disabled-link:hover {
      transform: none;
      border-color: #8c9197;
      background: linear-gradient(145deg, #4a545d, #313941);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.28);
    }
    .home-cta-auto.is-disabled-link .home-cta-icon-pack {
      background: rgba(17, 19, 22, 0.36);
      border-color: rgba(224, 229, 234, 0.2);
    }
    .home-cta-auto.is-disabled-shake {
      animation: homeCtaShake 360ms ease;
    }
    .home-cta-auto.is-loading {
      cursor: not-allowed;
      color: #d5d8db;
      border-color: #7b8086;
      background: linear-gradient(145deg, #4b5057, #353a41);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.28);
      transform: none;
    }
    .home-cta-auto.is-loading:hover {
      cursor: not-allowed;
      color: #d5d8db;
      border-color: #7b8086;
      background: linear-gradient(145deg, #4b5057, #353a41);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.28);
      transform: none;
    }
    .home-cta-auto.is-loading .home-cta-icon-pack {
      background: rgba(18, 20, 23, 0.4);
      border-color: rgba(224, 229, 234, 0.22);
    }
    .home-cta-auto.is-loading .site-icon-download,
    .home-cta-auto.is-loading .site-icon-windows,
    .home-cta-auto.is-loading .home-cta-icon-sep {
      display: none;
    }
    .home-cta-auto.is-loading .home-cta-loading-spinner {
      display: inline-block;
    }
    .home-download-alert {
      width: min(350px, 100%);
      margin: 0 auto;
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transform: translateY(-6px) scale(0.98);
      border: 1px solid transparent;
      border-radius: 9px;
      background: rgba(0, 0, 0, 0.16);
      color: #ffe9e9;
      font-size: 12px;
      font-weight: 700;
      line-height: 1.2;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      transition: opacity 200ms ease, transform 200ms ease, max-height 200ms ease, padding 200ms ease, border-color 200ms ease;
      padding: 0 10px;
      box-sizing: border-box;
    }
    .home-download-alert.is-visible {
      opacity: 1;
      transform: translateY(0) scale(1);
      max-height: 54px;
      min-height: 54px;
      padding: 0 10px;
      border-color: rgba(255, 174, 174, 0.42);
      background: rgba(90, 21, 21, 0.42);
      animation: homeAlertPulse 1200ms ease;
    }
    body.home-download-modal-open {
      overflow: hidden;
    }
    .home-download-modal {
      position: fixed;
      inset: 0;
      z-index: 5000;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      box-sizing: border-box;
      background: rgba(12, 12, 13, 0.84);
      backdrop-filter: blur(3px);
      -webkit-backdrop-filter: blur(3px);
    }
    .home-download-modal-panel {
      position: relative;
      width: min(980px, 96vw);
      max-height: min(88vh, 820px);
      overflow: auto;
      display: flex;
      gap: 18px;
      align-items: start;
      border: 1px solid #3a3a3d;
      border-radius: 14px;
      padding: 26px;
      background: linear-gradient(165deg, #1a1b1f 0%, #141519 100%);
      color: #ededee;
      box-shadow: 0 22px 44px rgba(0, 0, 0, 0.42);
    }
    .home-download-modal-close {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 34px;
      height: 34px;
      border: 1px solid #4a4a4f;
      border-radius: 8px;
      background: rgba(28, 28, 30, 0.9);
      color: #f0f0f1;
      cursor: pointer;
      font-size: 24px;
      line-height: 1;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    .home-download-modal-close:hover {
      border-color: #6a6a70;
      background: rgba(34, 34, 37, 0.96);
    }
    .home-download-modal-icon-wrap {
      width: 70px;
      height: 70px;
      border-radius: 12px;
      background: #2c2d31;
      border: 1px solid #4a4b50;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      color: #d8d8db;
      box-sizing: border-box;
      flex: 0 0 auto;
    }
    .home-download-modal-icon-wrap svg {
      width: 36px;
      height: 36px;
      stroke: currentColor;
      fill: none;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
    }
    .home-download-modal-copy {
      display: grid;
      gap: 8px;
      flex: 1 1 auto;
      min-width: 0;
    }
    .home-download-modal-title {
      margin: 0;
      font-size: clamp(21px, 3.6vw, 30px);
      line-height: 1.1;
      letter-spacing: -0.01em;
      color: #f4f4f5;
    }
    .home-download-modal-text {
      margin: 0;
      color: #d6d6d8;
      font-size: 15px;
      line-height: 1.45;
    }
    .home-download-modal-countdown {
      margin: 0;
      color: #ececef;
      font-size: 15px;
      font-weight: 800;
      line-height: 1.35;
    }
    .home-download-modal-help {
      margin: 0;
      color: #cfcfd3;
      font-size: 14px;
      line-height: 1.4;
    }
    .home-download-modal-help a {
      color: #f2f2f4;
      font-weight: 800;
      text-decoration: underline;
      text-underline-offset: 3px;
    }
    .home-download-modal-help a:hover {
      color: #ffffff;
    }
    @media (max-width: 640px) {
      .home-download-modal-panel {
        gap: 12px;
      }
      .home-download-modal-icon-wrap {
        width: 62px;
        height: 62px;
      }
    }
    .home-download-modal[hidden] {
      display: none;
    }
    @keyframes homeCtaShake {
      0%, 100% { transform: translateX(0); }
      20% { transform: translateX(-3px); }
      40% { transform: translateX(3px); }
      60% { transform: translateX(-2px); }
      80% { transform: translateX(2px); }
    }
    @keyframes homeAlertPulse {
      0% { box-shadow: 0 0 0 rgba(255, 120, 120, 0); }
      40% { box-shadow: 0 0 0 4px rgba(255, 120, 120, 0.2); }
      100% { box-shadow: 0 0 0 rgba(255, 120, 120, 0); }
    }
    @keyframes homeDownloadSpin {
      to { transform: rotate(360deg); }
    }

    .home-cta-auto:hover {
      background: linear-gradient(145deg, #3ca86c, #297b4f);
      border-color: #77e5a8;
      box-shadow: 0 12px 24px rgba(18, 67, 43, 0.52);
    }

    .home-manual-link {
      appearance: none;
      border: 0;
      background: transparent;
      cursor: pointer;
      width: fit-content;
      color: #d3efdc;
      font-size: 13px;
      font-weight: 700;
      text-decoration: underline;
      text-underline-offset: 3px;
      text-decoration-thickness: 1px;
      text-decoration-color: rgba(211, 239, 220, 0.85);
      padding: 0 2px;
    }

    .home-manual-link:hover {
      color: #ecfff2;
      text-decoration-color: rgba(236, 255, 242, 1);
    }

    .home-manual-link:focus-visible {
      outline: 2px solid rgba(119, 229, 168, 0.8);
      outline-offset: 3px;
      border-radius: 4px;
    }

    .home-mini-actions {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    .home-cta-small {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      min-height: 36px;
      padding: 0 12px;
      font-size: 13px;
      border-radius: 9px;
      line-height: 1;
      text-align: center;
    }
    .home-cta-small svg {
      width: 17px;
      height: 17px;
      flex: 0 0 17px;
      display: block;
      margin: 0;
    }
    .home-cta-small span {
      display: inline-block;
      line-height: 1;
      text-align: center;
      white-space: nowrap;
    }

    .home-cta-map {
      background: linear-gradient(145deg, #235870, #1a4256);
      border-color: #4a8ba9;
      color: #ecf7ff;
    }

    .home-cta-map:hover {
      background: linear-gradient(145deg, #2f6f8e, #24586f);
      border-color: #75acc4;
      box-shadow: 0 10px 20px rgba(4, 31, 45, 0.5);
    }

    .home-cta-discord {
      background: linear-gradient(145deg, #3f4f8a, #2d3965);
      border-color: #6b7bc0;
      color: #f1f4ff;
    }

    .home-cta-discord:hover {
      background: linear-gradient(145deg, #4e61a5, #39497d);
      border-color: #8c9ddb;
      box-shadow: 0 10px 20px rgba(18, 24, 54, 0.52);
    }

    .home-cta-faq {
      background: linear-gradient(145deg, #7d5f28, #5d461d);
      border-color: #b08944;
      color: #fff6e7;
    }

    .home-cta-faq:hover {
      background: linear-gradient(145deg, #947233, #6f5424);
      border-color: #c79d58;
      box-shadow: 0 10px 20px rgba(48, 34, 9, 0.5);
    }

    .home-cta-youtube {
      background: linear-gradient(145deg, #c01a1a, #8d1212);
      border-color: #ea4c4c;
      color: #fff2f2;
    }

    .home-cta-youtube:hover {
      background: linear-gradient(145deg, #d72626, #a51717);
      border-color: #f46a6a;
      box-shadow: 0 10px 20px rgba(66, 12, 12, 0.54);
    }
    .home-cta-discord .site-icon-discord{
      fill: currentColor;
      stroke: none;
    }
    .home-cta-discord .site-icon-discord path{
      fill: currentColor !important;
      stroke: none !important;
    }

    .home-cta-youtube .site-icon-youtube {
      fill: currentColor;
      stroke: none;
    }

    .home-manual-column {
      width: 100%;
      max-width: var(--home-manual-width);
      opacity: 0;
      pointer-events: none;
      min-width: 0;
      overflow: hidden;
      transition: opacity 180ms ease;
    }

    .home-shell.is-manual-open .home-manual-column {
      opacity: 1;
      pointer-events: auto;
    }

    .home-manual-panel {
      position: relative;
      border: 0 solid var(--home-border);
      border-radius: 14px;
      background: linear-gradient(170deg, rgba(20, 20, 20, 0.95), rgba(14, 14, 14, 0.95));
      box-shadow: 0 16px 38px rgba(0, 0, 0, 0.32);
      padding: 0;
      max-height: 0;
      overflow: hidden;
      scrollbar-gutter: stable;
      scrollbar-width: thin;
      scrollbar-color: #6f6f6f #1b1b1b;
      opacity: 0;
      transform: translateX(16px);
      pointer-events: none;
      transition: max-height 220ms ease, padding 220ms ease, border-width 220ms ease, opacity 220ms ease, transform 220ms ease;
    }

    .home-manual-panel::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }

    .home-manual-panel::-webkit-scrollbar-track {
      background: #1b1b1b;
      border-radius: 8px;
    }

    .home-manual-panel::-webkit-scrollbar-thumb {
      background: #6f6f6f;
      border-radius: 8px;
      border: 2px solid #1b1b1b;
    }

    .home-manual-panel::-webkit-scrollbar-thumb:hover {
      background: #9a9a9a;
    }

    .home-shell.is-manual-open .home-manual-panel {
      border-width: 1px;
      padding: 14px;
      max-height: calc(100vh - var(--sitebar-height, 52px) - 54px);
      overflow: auto;
      opacity: 1;
      transform: translateX(0);
      pointer-events: auto;
    }

    .home-manual-title {
      margin: 0 34px 10px 0;
      font-size: 18px;
      line-height: 1.2;
      color: #ffffff;
    }

    .home-manual-close {
      position: absolute;
      top: 8px;
      right: 8px;
      width: 28px;
      height: 28px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border: 1px solid #3a3a3a;
      border-radius: 8px;
      background: #1a1a1a;
      color: #f0f0f0;
      font-size: 20px;
      line-height: 1;
      cursor: pointer;
      transition: background 150ms ease, border-color 150ms ease, transform 150ms ease;
    }

    .home-manual-close:hover {
      background: #232323;
      border-color: #525252;
      transform: translateY(-1px);
    }

    .home-manual-close:focus-visible {
      outline: 2px solid rgba(119, 229, 168, 0.85);
      outline-offset: 2px;
    }

    .home-manual-group {
      border-top: 1px solid #2a2a2a;
      padding-top: 10px;
      margin-top: 10px;
      display: grid;
      gap: 7px;
    }

    .home-manual-group:first-of-type {
      border-top: 0;
      padding-top: 0;
      margin-top: 0;
    }

    .home-manual-group h3 {
      margin: 0;
      font-size: 11px;
      font-weight: 800;
      letter-spacing: .08em;
      text-transform: uppercase;
      color: #d9d9d9;
    }

    .home-manual-list {
      margin: 0;
      padding-left: 17px;
      color: #d0d0d0;
      line-height: 1.45;
      display: grid;
      gap: 4px;
      font-size: 13px;
    }

    .home-manual-link-inline {
      color: #dff0e6;
      text-decoration: underline;
      text-underline-offset: 2px;
      text-decoration-thickness: 1px;
      text-decoration-color: rgba(223, 240, 230, 0.75);
    }

    .home-manual-link-inline:hover {
      color: #ffffff;
      text-decoration-color: rgba(255, 255, 255, 1);
    }

    .home-manual-video-embed {
      border: 1px solid #2f2f2f;
      border-radius: 10px;
      overflow: hidden;
      background: #0d0d0d;
      width: min(100%, 340px);
      margin: 0 auto;
    }

    .home-manual-video-embed iframe {
      display: block;
      width: 100%;
      aspect-ratio: 16 / 9;
      border: 0;
    }

    .home-panel {
      border: 1px solid var(--home-border);
      border-radius: 12px;
      background: linear-gradient(170deg, #171717, #141414);
      box-shadow: 0 16px 38px rgba(0, 0, 0, 0.32);
      padding: 22px 26px;
      display: grid;
      gap: 16px;
    }

    .home-panel-title {
      margin: 0;
      color: #ffffff;
      font-size: clamp(32px, 5vw, 46px);
      letter-spacing: -0.01em;
      line-height: 1;
    }

    .home-panel-divider {
      height: 1px;
      width: 100%;
      background: linear-gradient(90deg, rgba(200, 200, 200, 0.24), rgba(200, 200, 200, 0.05));
    }

    .home-highlights {
      display: grid;
      gap: 18px;
    }

    .home-highlight {
      display: grid;
      gap: 5px;
    }

    .home-highlight h3 {
      margin: 0;
      font-size: 25px;
      font-weight: 800;
      color: #d9d9d9;
      line-height: 1;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .home-highlight p {
      margin: 0;
      color: var(--home-muted);
      line-height: 1.6;
      font-size: clamp(15px, 1.6vw, 17px);
      max-width: 88ch;
    }

    @media (min-width: 901px) {
      .home-shell,
      .home-shell.is-manual-open {
        grid-template-columns: minmax(0, 1120px);
        gap: 0;
      }

      .home-manual-column {
        position: fixed;
        right: 14px;
        top: calc(var(--sitebar-height, 52px) + 14px);
        width: min(var(--home-manual-width), calc(100vw - 28px));
        max-width: var(--home-manual-width);
        opacity: 1;
        overflow: visible;
        pointer-events: none;
        z-index: 30;
      }

      .home-shell.is-manual-open .home-manual-column {
        pointer-events: auto;
      }

      .home-manual-panel {
        border-width: 1px;
        padding: 14px;
        max-height: calc(100vh - var(--sitebar-height, 52px) - 28px);
        overflow: auto;
        opacity: 0;
        transform: translateX(calc(100% + 18px));
        pointer-events: none;
        transition: opacity 220ms ease, transform 220ms ease;
      }

      .home-shell.is-manual-open .home-manual-panel {
        opacity: 1;
        transform: translateX(0);
        pointer-events: auto;
      }
    }

    @media (max-width: 900px) {
      .home-shell,
      .home-shell.is-manual-open {
        width: 100%;
        grid-template-columns: 1fr;
        gap: 12px;
      }

      .home-manual-column {
        width: 100%;
        opacity: 1;
        pointer-events: auto;
      }

      .home-manual-panel {
        max-height: 0;
        padding-top: 0;
        padding-bottom: 0;
        border-width: 0;
        opacity: 0;
        transform: translateY(-8px);
      }

      .home-shell.is-manual-open .home-manual-panel {
        max-height: 900px;
        padding: 14px;
        border-width: 1px;
        opacity: 1;
        transform: translateY(0);
      }

      .home-mini-actions {
        width: 100%;
      }

      .home-cta-small {
        flex: 1 1 calc(50% - 4px);
      }

      .home-panel {
        padding: 18px;
      }
    }

    @media (max-width: 720px) {
      .home-wrap {
        padding: calc(var(--sitebar-height, 52px) + 10px) 10px 14px;
      }

      .home-hero {
        min-height: 320px;
      }

      .home-hero-content {
        padding: 16px;
        gap: 12px;
      }

      .home-title {
        font-size: clamp(34px, 11vw, 42px);
      }

      .home-panel-title {
        font-size: clamp(28px, 8.4vw, 36px);
      }

      .home-highlight h3 {
        font-size: 20px;
      }
    }
  </style>
</head>
<body data-bg-opacity="0.28" data-bg-overlay-top="0.72" data-bg-overlay-bottom="0.9">
  <main class="home-wrap">
    <section class="home-shell" id="homeShell">
      <div class="home-main">
        <section class="home-hero" aria-labelledby="homeHeroTitle">
          <div class="home-hero-content">
            <div class="home-hero-heading">
              <h1 class="home-title" id="homeHeroTitle">
                <img class="home-title-logo" src="./images/idf_logo_new.png" alt="IDF Map."/>
              </h1>
            </div>

            <div class="home-cta-stack">
              <a
                id="homeAutoDownloadBtn"
                class="home-cta home-cta-auto"
                href="#"
                data-offsite-key="download_home_fr"
                target="_blank"
                rel="noopener noreferrer"
              >
                <span class="home-cta-icon-pack" aria-hidden="true">
                  <svg class="site-icon-download" viewBox="0 0 24 24">
                    <path d="M12 3v11"></path>
                    <path d="M8 10l4 4 4-4"></path>
                    <path d="M5 20h14"></path>
                  </svg>
                  <span class="home-cta-icon-sep"></span>
                  <svg class="site-icon-windows" viewBox="0 0 24 24">
                    <path d="M2 4.2L10.9 3v8.6H2V4.2zM12.1 2.9L22 1.5v10.1h-9.9V2.9zM2 12.4h8.9V21L2 19.8v-7.4zM12.1 12.4H22v10.1l-9.9-1.3v-8.8z"></path>
                  </svg>
                  <span class="home-cta-loading-spinner"></span>
                </span>
                <span data-i18n="download_button">Telecharger</span>
              </a>
              <p id="homeAutoDownloadAlert" class="home-download-alert" role="status" aria-live="polite" hidden></p>

              <button
                type="button"
                class="home-manual-link"
                id="homeManualToggleBtn"
                aria-expanded="false"
                aria-controls="homeManualPanel"
              >
                <span data-i18n="downloads_manual_title">Telechargement manuel</span>
              </button>

              <div class="home-mini-actions">
                <a class="home-cta home-cta-small home-cta-map" id="homeMapBtn" href="map">
                  <svg viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M9 4l6-2 6 2v16l-6-2-6 2-6-2V4l6 2z"></path>
                    <path d="M9 6v14"></path>
                    <path d="M15 4v14"></path>
                  </svg>
                  <span data-i18n="home_btn_interactive_map">Carte interactive</span>
                </a>

                <a class="home-cta home-cta-small home-cta-faq" id="homeFaqBtn" href="faq">
                  <svg viewBox="0 0 24 24" aria-hidden="true">
                    <circle cx="12" cy="12" r="9"></circle>
                    <path d="M9.6 9.2a2.4 2.4 0 1 1 4.8 0c0 1.6-1.8 2.2-2.4 3"></path>
                    <path d="M12 16.8h.01"></path>
                  </svg>
                  <span data-i18n="nav_faq">FAQ</span>
                </a>

                <a
                  id="homeDiscordBtn"
                  class="home-cta home-cta-small home-cta-discord"
                  href="#"
                  data-offsite-key="discord"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  <svg class="site-icon-discord" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <path d="M18.59 5.88997C17.36 5.31997 16.05 4.89997 14.67 4.65997C14.5 4.95997 14.3 5.36997 14.17 5.69997C12.71 5.47997 11.26 5.47997 9.83001 5.69997C9.69001 5.36997 9.49001 4.95997 9.32001 4.65997C7.94001 4.89997 6.63001 5.31997 5.40001 5.88997C2.92001 9.62997 2.25001 13.28 2.58001 16.87C4.23001 18.1 5.82001 18.84 7.39001 19.33C7.78001 18.8 8.12001 18.23 8.42001 17.64C7.85001 17.43 7.31001 17.16 6.80001 16.85C6.94001 16.75 7.07001 16.64 7.20001 16.54C10.33 18 13.72 18 16.81 16.54C16.94 16.65 17.07 16.75 17.21 16.85C16.7 17.16 16.15 17.42 15.59 17.64C15.89 18.23 16.23 18.8 16.62 19.33C18.19 18.84 19.79 18.1 21.43 16.87C21.82 12.7 20.76 9.08997 18.61 5.88997H18.59ZM8.84001 14.67C7.90001 14.67 7.13001 13.8 7.13001 12.73C7.13001 11.66 7.88001 10.79 8.84001 10.79C9.80001 10.79 10.56 11.66 10.55 12.73C10.55 13.79 9.80001 14.67 8.84001 14.67ZM15.15 14.67C14.21 14.67 13.44 13.8 13.44 12.73C13.44 11.66 14.19 10.79 15.15 10.79C16.11 10.79 16.87 11.66 16.86 12.73C16.86 13.79 16.11 14.67 15.15 14.67Z" fill="#000000"></path>
                  </svg>
                  <span data-i18n="home_btn_discord">Discord</span>
                </a>

                <a
                  id="homeYoutubeBtn"
                  class="home-cta home-cta-small home-cta-youtube"
                  href="#"
                  data-offsite-key="youtube"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  <svg class="site-icon-youtube" viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M23.5 6.2a3 3 0 0 0-2.1-2.1C19.5 3.5 12 3.5 12 3.5s-7.5 0-9.4.6A3 3 0 0 0 .5 6.2 31 31 0 0 0 0 12a31 31 0 0 0 .5 5.8 3 3 0 0 0 2.1 2.1c1.9.6 9.4.6 9.4.6s7.5 0 9.4-.6a3 3 0 0 0 2.1-2.1A31 31 0 0 0 24 12a31 31 0 0 0-.5-5.8zM9.6 15.6V8.4l6.2 3.6-6.2 3.6z"></path>
                  </svg>
                  <span>YouTube</span>
                </a>
              </div>
            </div>
          </div>
        </section>

        <section class="home-panel" aria-labelledby="homePanelTitle">
          <div class="home-highlights">
            <article class="home-highlight">
              <p data-i18n="home_intro_p1">Ce projet est une recréation de la région parisienne pour Euro Truck Simulator 2, inspirée de la réalité de l’Île-de-France.</p>
            </article>
            <article class="home-highlight">
              <p data-i18n="home_intro_p2">La map est conçue à une échelle 1:1, avec l'objectif d’offrir une expérience de conduite réaliste et immersive. Certains ajustements ont été réalisés pour améliorer la jouabilité, la fluidité et l’adaptation aux contraintes du jeu.</p>
            </article>
            <article class="home-highlight">
              <p data-i18n="home_intro_p3">Ce projet s’adresse aux joueurs souhaitant explorer une version réaliste de la région parisienne dans ETS 2, que ce soit pour le transport de marchandises ou de passagers, la découverte ou l’immersion.</p>
            </article>
          </div>
        </section>
      </div>

      <aside class="home-manual-column" aria-live="polite">
        <section class="home-manual-panel" id="homeManualPanel">
          <button type="button" class="home-manual-close" id="homeManualCloseBtn" aria-label="Fermer le tutoriel" title="Fermer">
            <span aria-hidden="true">&times;</span>
          </button>
          <h2 class="home-manual-title" data-i18n="downloads_manual_tutorial_title">Tutoriel d'installation manuelle</h2>

          <section class="home-manual-group">
            <h3 data-i18n="guide_install_prereq_title">PRÉREQUIS</h3>
            <ul class="home-manual-list">
              <li data-i18n="guide_install_prereq_1">Vous devez posséder les DLC requis et la bonne version du jeu.</li>
              <li>
                <a class="home-manual-link-inline" id="homeSteamDlcLink" href="#" target="_blank" rel="noopener noreferrer" data-i18n="guide_install_prereq_2">Accéder à la page Steam des DLC</a>
              </li>
              <li>
                <a class="home-manual-link-inline" id="homeManualDepsLink" href="#" data-offsite-key="download" target="_blank" rel="noopener noreferrer" data-i18n="guide_install_prereq_3_link">Voir les DLC requis</a>
                <span data-i18n="guide_install_prereq_3_note">(Voir dans l'onglet "Dependencies")</span>
              </li>
            </ul>
          </section>

          <section class="home-manual-group">
            <h3 data-i18n="guide_install_config_title">RÉGLAGE IMPORTANT</h3>
            <ul class="home-manual-list">
              <li data-i18n="guide_install_config_1">Accédez à Documents\Euro Truck Simulator 2 et ouvrez le fichier config.cfg</li>
              <li data-i18n="guide_install_config_2">Recherchez la ligne où se trouve uset r_buffer_page_size</li>
              <li data-i18n="guide_install_config_3">Modifiez la valeur de uset r_buffer_page_size de 10 à 30</li>
              <li data-i18n="guide_install_config_4">Enregistrez et fermez le fichier</li>
            </ul>
          </section>

          <section class="home-manual-group">
            <h3 data-i18n="guide_install_map_title">INSTALLATION DE LA MAP</h3>
            <ul class="home-manual-list">
              <li>
                <a class="home-manual-link-inline" id="homeManualMapDownloadLink" href="#" data-offsite-key="download" target="_blank" rel="noopener noreferrer" data-i18n="guide_install_map_1">Téléchargez la map ici</a>
              </li>
              <li data-i18n="guide_install_map_2">Placez le fichier .scs dans Documents\Euro Truck Simulator 2\mod</li>
            </ul>
          </section>

          <section class="home-manual-group">
            <h3 data-i18n="guide_install_launch_title">LANCEMENT DU JEU</h3>
            <ul class="home-manual-list">
              <li data-i18n="guide_install_launch_1">Lancez le jeu et créez une nouvelle carrière</li>
              <li data-i18n="guide_install_launch_2">Ajoutez le mod de la map tout en haut de votre liste de mods activés et enregistrez</li>
              <li data-i18n="guide_install_launch_3">Sélectionnez le module de carte idf.mbd dans l'onglet de création de profil</li>
              <li data-i18n="guide_install_launch_4">Créez le profil et jouez !</li>
            </ul>
          </section>

          <section class="home-manual-group" id="homeManualVideoGroup">
            <h3 data-i18n="guide_install_video">Vidéo d'installation</h3>
            <div class="home-manual-video-embed">
              <iframe
                id="homeManualVideoFrame"
                src="about:blank"
                title="Tutoriel d'installation manuelle"
                loading="lazy"
                referrerpolicy="strict-origin-when-cross-origin"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen
              ></iframe>
            </div>
          </section>
        </section>
      </aside>
    </section>
  </main>
  <div id="homeDownloadModal" class="home-download-modal" role="dialog" aria-modal="true" aria-labelledby="homeDownloadModalTitle" hidden>
    <div class="home-download-modal-panel" role="document">
      <button type="button" id="homeDownloadModalCloseBtn" class="home-download-modal-close" aria-label="Fermer">&times;</button>
      <div class="home-download-modal-icon-wrap" aria-hidden="true">
        <svg viewBox="0 0 24 24">
          <path d="M12 3v10"></path>
          <path d="M8.2 9.6L12 13.4l3.8-3.8"></path>
          <path d="M4 20h16"></path>
        </svg>
      </div>
      <div class="home-download-modal-copy">
        <h2 id="homeDownloadModalTitle" class="home-download-modal-title">Merci pour votre téléchargement</h2>
        <p id="homeDownloadModalCountdown" class="home-download-modal-countdown" aria-live="polite"></p>
        <p class="home-download-modal-text">Après le téléchargement, lancez le fichier <strong>.exe</strong>. Selon votre antivirus, une alerte peut apparaître, c’est généralement un faux positif.</p>
        <p class="home-download-modal-help">Si le téléchargement ne démarre pas, <a id="homeDownloadModalManualStart" href="#">cliquez ici</a>.</p>
      </div>
    </div>
  </div>

  <script src="config/translations.js"></script>
  <script src="config/config.js"></script>
  <script src="config/site-nav.js"></script>
  <script src="config/shared-header.js"></script>
  <script>
    (function initHomePage() {
      const homeShell = document.getElementById("homeShell");
      const homeAutoDownloadBtn = document.getElementById("homeAutoDownloadBtn");
      const homeAutoDownloadAlert = document.getElementById("homeAutoDownloadAlert");
      const homeManualToggleBtn = document.getElementById("homeManualToggleBtn");
      const homeManualDepsLink = document.getElementById("homeManualDepsLink");
      const homeManualMapDownloadLink = document.getElementById("homeManualMapDownloadLink");
      const homeSteamDlcLink = document.getElementById("homeSteamDlcLink");
      const homeManualVideoGroup = document.getElementById("homeManualVideoGroup");
      const homeManualVideoFrame = document.getElementById("homeManualVideoFrame");
      const homeManualPanel = document.getElementById("homeManualPanel");
      const homeDiscordBtn = document.getElementById("homeDiscordBtn");
      const homeYoutubeBtn = document.getElementById("homeYoutubeBtn");
      const homeManualCloseBtn = document.getElementById("homeManualCloseBtn");
      const homeDownloadModal = document.getElementById("homeDownloadModal");
      const homeDownloadModalCloseBtn = document.getElementById("homeDownloadModalCloseBtn");
      const homeDownloadModalManualStart = document.getElementById("homeDownloadModalManualStart");
      const homeDownloadModalCountdown = document.getElementById("homeDownloadModalCountdown");
      let autoDownloadAlertTimer = 0;
      let autoDownloadAlertHideTimer = 0;
      let autoDownloadAlertToken = 0;
      let homeDownloadBtnLoadingTimer = 0;
      let homeDownloadModalLastFocus = null;
      let homeDownloadModalCountdownTimer = 0;
      let homeDownloadModalCountdownValue = 0;
      let homeDownloadLauncherFrame = null;
      const HOME_DOWNLOAD_AUTO_DELAY_SECONDS = 6;
      const HOME_DOWNLOAD_BUTTON_LOCK_MS = 1600;

      function lang() {
        return String(document.documentElement.getAttribute("lang") || "fr").toLowerCase().slice(0, 2);
      }

      function t(key, fallback) {
        const i18n = window.I18N || {};
        const code = lang();
        const fromLang = i18n[code] && i18n[code][key];
        if (typeof fromLang === "string" && fromLang) return fromLang;
        const fromFr = i18n.fr && i18n.fr[key];
        if (typeof fromFr === "string" && fromFr) return fromFr;
        return fallback;
      }

      function applyOffsiteHref(anchor) {
        if (!anchor) return;
        const key = String(anchor.getAttribute("data-offsite-key") || "").trim();
        if (!key) return;
        const offsite = window.SITE_OFFSITE_LINKS && typeof window.SITE_OFFSITE_LINKS === "object"
          ? window.SITE_OFFSITE_LINKS
          : {};
        const href = String(offsite[key] || "").trim();
        if (!href) return;
        anchor.setAttribute("href", href);
      }

      function siteLinks() {
        const links = window.SITE_LINKS;
        return links && typeof links === "object" ? links : {};
      }

      function applyTexts() {
        document.querySelectorAll("[data-i18n]").forEach((el) => {
          const key = String(el.getAttribute("data-i18n") || "").trim();
          if (!key) return;
          el.textContent = t(key, el.textContent);
        });
      }

      function resetManualVideo() {
        if (!homeManualVideoFrame) return;
        const initialSrc = homeManualVideoFrame.dataset.initialSrc
          || String(homeManualVideoFrame.getAttribute("src") || "").trim();
        if (!initialSrc) return;
        if (!homeManualVideoFrame.dataset.initialSrc) {
          homeManualVideoFrame.dataset.initialSrc = initialSrc;
        }
        homeManualVideoFrame.setAttribute("src", "about:blank");
        window.setTimeout(() => {
          homeManualVideoFrame.setAttribute("src", initialSrc);
        }, 0);
      }

      function isCompactLayout() {
        return window.matchMedia("(max-width: 900px)").matches;
      }

      function scrollToManualPanel() {
        if (!homeManualPanel) return;
        const rootStyles = window.getComputedStyle(document.documentElement);
        const sitebarHeight = Number.parseFloat(rootStyles.getPropertyValue("--sitebar-height")) || 52;
        const targetTop = window.scrollY + homeManualPanel.getBoundingClientRect().top - sitebarHeight - 12;
        window.scrollTo({
          top: Math.max(0, targetTop),
          behavior: "smooth"
        });
      }

      function setManualPanelOpen(open) {
        if (!homeShell || !homeManualToggleBtn) return;
        const wasOpen = homeShell.classList.contains("is-manual-open");
        homeManualVideoFrame.contentWindow?.postMessage(
          '{"event":"command","func":"stopVideo","args":""}',
          "*"
        );
        homeShell.classList.toggle("is-manual-open", !!open);
        homeManualToggleBtn.setAttribute("aria-expanded", open ? "true" : "false");
        if (open && !wasOpen && isCompactLayout()) {
          requestAnimationFrame(() => {
            scrollToManualPanel();
            window.setTimeout(scrollToManualPanel, 230);
          });
        }
      }

      function setManualToggleVisibility(visible) {
        if (!homeManualToggleBtn) return;
        homeManualToggleBtn.hidden = !visible;
        homeManualToggleBtn.style.display = visible ? "" : "none";
        homeManualToggleBtn.setAttribute("aria-hidden", visible ? "false" : "true");
        if (visible) {
          homeManualToggleBtn.removeAttribute("tabindex");
          return;
        }
        homeManualToggleBtn.setAttribute("tabindex", "-1");
      }

      function homeDownloadCountdownText(remainingSeconds) {
        const amount = Math.max(0, Number(remainingSeconds) || 0);
        if (amount <= 0) return "Lancement du téléchargement...";
        return "Le téléchargement va se lancer dans " + amount + " seconde" + (amount > 1 ? "s" : "") + "...";
      }

      function setHomeDownloadCountdown(remainingSeconds) {
        if (!homeDownloadModalCountdown) return;
        homeDownloadModalCountdown.textContent = homeDownloadCountdownText(remainingSeconds);
      }

      function setHomeAutoDownloadLoading(active) {
        if (!homeAutoDownloadBtn) return;
        if (homeDownloadBtnLoadingTimer) {
          window.clearTimeout(homeDownloadBtnLoadingTimer);
          homeDownloadBtnLoadingTimer = 0;
        }
        homeAutoDownloadBtn.classList.toggle("is-loading", !!active);
        homeAutoDownloadBtn.setAttribute("aria-busy", active ? "true" : "false");
        homeAutoDownloadBtn.setAttribute("aria-disabled", active ? "true" : "false");
        if (!active) return;
        homeDownloadBtnLoadingTimer = window.setTimeout(() => {
          homeDownloadBtnLoadingTimer = 0;
          homeAutoDownloadBtn.classList.remove("is-loading");
          homeAutoDownloadBtn.setAttribute("aria-busy", "false");
          homeAutoDownloadBtn.setAttribute("aria-disabled", "false");
        }, HOME_DOWNLOAD_BUTTON_LOCK_MS);
      }

      function clearHomeDownloadCountdown() {
        if (homeDownloadModalCountdownTimer) {
          window.clearInterval(homeDownloadModalCountdownTimer);
          homeDownloadModalCountdownTimer = 0;
        }
      }

      function syncHomeDownloadManualStartLink() {
        if (!homeDownloadModalManualStart || !homeAutoDownloadBtn) return;
        const href = String(homeAutoDownloadBtn.getAttribute("href") || "").trim();
        homeDownloadModalManualStart.setAttribute("href", href && href !== "#" ? href : "#");
      }

      function getHomeDownloadLauncherFrame() {
        if (homeDownloadLauncherFrame && document.body.contains(homeDownloadLauncherFrame)) {
          return homeDownloadLauncherFrame;
        }
        const frame = document.createElement("iframe");
        frame.setAttribute("aria-hidden", "true");
        frame.setAttribute("tabindex", "-1");
        frame.style.display = "none";
        frame.style.width = "0";
        frame.style.height = "0";
        frame.style.border = "0";
        document.body.appendChild(frame);
        homeDownloadLauncherFrame = frame;
        return frame;
      }

      function triggerHomeDownloadWithoutNavigation(href) {
        const frame = getHomeDownloadLauncherFrame();
        if (!frame) return false;
        try {
          frame.src = "about:blank";
          frame.src = href;
          return true;
        } catch {
          return false;
        }
      }

      function closeHomeDownloadModal() {
        if (!homeDownloadModal) return;
        clearHomeDownloadCountdown();
        homeDownloadModalCountdownValue = 0;
        homeDownloadModal.hidden = true;
        document.body.classList.remove("home-download-modal-open");
        if (homeDownloadModalLastFocus && typeof homeDownloadModalLastFocus.focus === "function") {
          homeDownloadModalLastFocus.focus();
        }
        homeDownloadModalLastFocus = null;
      }

      function openHomeDownloadModal() {
        if (!homeDownloadModal) return;
        homeDownloadModalLastFocus = document.activeElement instanceof HTMLElement
          ? document.activeElement
          : null;
        clearHomeDownloadCountdown();
        homeDownloadModalCountdownValue = HOME_DOWNLOAD_AUTO_DELAY_SECONDS;
        syncHomeDownloadManualStartLink();
        setHomeDownloadCountdown(homeDownloadModalCountdownValue);
        homeDownloadModal.hidden = false;
        document.body.classList.add("home-download-modal-open");
        homeDownloadModalCloseBtn?.focus();
        homeDownloadModalCountdownTimer = window.setInterval(() => {
          homeDownloadModalCountdownValue -= 1;
          if (homeDownloadModalCountdownValue <= 0) {
            clearHomeDownloadCountdown();
            launchHomeDownloadFromModal();
            return;
          }
          setHomeDownloadCountdown(homeDownloadModalCountdownValue);
        }, 1000);
      }

      function launchHomeDownloadFromModal() {
        if (!homeAutoDownloadBtn) return;
        if (homeAutoDownloadBtn.classList.contains("is-loading")) return;
        const href = String(homeAutoDownloadBtn.getAttribute("href") || "").trim();
        if (!href || href === "#") {
          setHomeAutoDownloadLoading(false);
          closeHomeDownloadModal();
          showAutoDownloadAlert();
          return;
        }
        setHomeAutoDownloadLoading(true);
        clearHomeDownloadCountdown();
        setHomeDownloadCountdown(0);
        triggerHomeDownloadWithoutNavigation(href);
      }

      function hideAutoDownloadAlert(immediate) {
        if (!homeAutoDownloadAlert) return;
        window.clearTimeout(autoDownloadAlertTimer);
        window.clearTimeout(autoDownloadAlertHideTimer);
        homeAutoDownloadAlert.classList.remove("is-visible");
        if (immediate) {
          homeAutoDownloadAlert.hidden = true;
          return;
        }
        autoDownloadAlertHideTimer = window.setTimeout(() => {
          if (!homeAutoDownloadAlert.classList.contains("is-visible")) {
            homeAutoDownloadAlert.hidden = true;
          }
        }, 220);
      }

      function showAutoDownloadAlert(customMessage) {
        if (!homeAutoDownloadAlert || !homeAutoDownloadBtn) return;
        autoDownloadAlertToken += 1;
        const token = autoDownloadAlertToken;
        window.clearTimeout(autoDownloadAlertTimer);
        window.clearTimeout(autoDownloadAlertHideTimer);
        const message = customMessage || t(
          "home_download_unavailable_manual_hint",
          "Téléchargement automatique temporairement indisponible. Veuillez utiliser le téléchargement manuel pour le moment."
        );
        homeAutoDownloadAlert.textContent = message;
        homeAutoDownloadAlert.hidden = false;
        homeAutoDownloadAlert.classList.remove("is-visible");
        void homeAutoDownloadAlert.offsetWidth;
        homeAutoDownloadAlert.classList.add("is-visible");
        homeAutoDownloadBtn.classList.remove("is-disabled-shake");
        void homeAutoDownloadBtn.offsetWidth;
        homeAutoDownloadBtn.classList.add("is-disabled-shake");
        autoDownloadAlertTimer = window.setTimeout(() => {
          if (token !== autoDownloadAlertToken) return;
          hideAutoDownloadAlert(false);
        }, 5000);
      }

      function setAutoDownloadMode(mode) {
        if (!homeAutoDownloadBtn) return;
        if (mode === "manual") {
          setHomeAutoDownloadLoading(false);
          homeAutoDownloadBtn.dataset.downloadMode = "manual";
          homeAutoDownloadBtn.dataset.downloadLinkReady = "1";
          homeAutoDownloadBtn.setAttribute("href", "#");
          homeAutoDownloadBtn.classList.remove("is-disabled-link");
          homeAutoDownloadBtn.classList.remove("is-disabled-shake");
          homeAutoDownloadBtn.setAttribute("aria-disabled", "false");
          homeAutoDownloadBtn.removeAttribute("target");
          homeAutoDownloadBtn.removeAttribute("rel");
          hideAutoDownloadAlert(true);
          return;
        }
        setHomeAutoDownloadLoading(false);
        homeAutoDownloadBtn.dataset.downloadMode = "link";
        applyOffsiteHref(homeAutoDownloadBtn);
        const href = String(homeAutoDownloadBtn.getAttribute("href") || "").trim();
        const hasLink = !!href && href !== "#";
        homeAutoDownloadBtn.dataset.downloadLinkReady = hasLink ? "1" : "0";
        homeAutoDownloadBtn.classList.toggle("is-disabled-link", !hasLink);
        homeAutoDownloadBtn.classList.remove("is-disabled-shake");
        homeAutoDownloadBtn.setAttribute("aria-disabled", hasLink ? "false" : "true");
        if (!hasLink) {
          homeAutoDownloadBtn.setAttribute("href", "#");
          homeAutoDownloadBtn.removeAttribute("target");
          homeAutoDownloadBtn.removeAttribute("rel");
          return;
        }
        hideAutoDownloadAlert(true);
        homeAutoDownloadBtn.setAttribute("target", "_blank");
        homeAutoDownloadBtn.setAttribute("rel", "noopener noreferrer");
      }

      function bindEvents() {
        if (homeAutoDownloadBtn && homeAutoDownloadBtn.dataset.bound !== "1") {
          homeAutoDownloadBtn.dataset.bound = "1";
          homeAutoDownloadBtn.addEventListener("click", (event) => {
            if (homeAutoDownloadBtn.dataset.downloadMode === "link") {
              if (homeAutoDownloadBtn.dataset.downloadLinkReady !== "1") {
                event.preventDefault();
                showAutoDownloadAlert();
                return;
              }
              if (lang() === "fr") {
                event.preventDefault();
                launchHomeDownloadFromModal();
              }
              return;
            }
            if (homeAutoDownloadBtn.dataset.downloadMode !== "manual") return;
            event.preventDefault();
            const isOpen = homeShell && homeShell.classList.contains("is-manual-open");
            setManualPanelOpen(!isOpen);
          });
        }
        if (homeManualToggleBtn && homeManualToggleBtn.dataset.bound !== "1") {
          homeManualToggleBtn.dataset.bound = "1";
          homeManualToggleBtn.addEventListener("click", () => {
            const isOpen = homeShell && homeShell.classList.contains("is-manual-open");
            setManualPanelOpen(!isOpen);
          });
        }
        if (homeManualCloseBtn && homeManualCloseBtn.dataset.bound !== "1") {
          homeManualCloseBtn.dataset.bound = "1";
          homeManualCloseBtn.addEventListener("click", () => setManualPanelOpen(false));
        }
        if (homeDownloadModal && homeDownloadModal.dataset.bound !== "1") {
          homeDownloadModal.dataset.bound = "1";
          homeDownloadModal.addEventListener("click", (event) => {
            if (event.target === homeDownloadModal) {
              closeHomeDownloadModal();
            }
          });
        }
        if (homeDownloadModalCloseBtn && homeDownloadModalCloseBtn.dataset.bound !== "1") {
          homeDownloadModalCloseBtn.dataset.bound = "1";
          homeDownloadModalCloseBtn.addEventListener("click", closeHomeDownloadModal);
        }
        if (homeDownloadModalManualStart && homeDownloadModalManualStart.dataset.bound !== "1") {
          homeDownloadModalManualStart.dataset.bound = "1";
          homeDownloadModalManualStart.addEventListener("click", (event) => {
            event.preventDefault();
            launchHomeDownloadFromModal();
          });
        }
        if (!document.body.dataset.homeManualEscBound) {
          document.body.dataset.homeManualEscBound = "1";
          document.addEventListener("keydown", (event) => {
            if (event.key !== "Escape") return;
            if (homeDownloadModal && !homeDownloadModal.hidden) {
              closeHomeDownloadModal();
              return;
            }
            setManualPanelOpen(false);
          });
        }
      }

      function render() {
        const links = siteLinks();
        const guide = links.guide && typeof links.guide === "object" ? links.guide : {};
        applyOffsiteHref(homeManualDepsLink);
        applyOffsiteHref(homeManualMapDownloadLink);
        applyOffsiteHref(homeDiscordBtn);
        applyOffsiteHref(homeYoutubeBtn);
        const isFrench = lang() === "fr";
        setAutoDownloadMode(isFrench ? "link" : "manual");
        syncHomeDownloadManualStartLink();
        if (!isFrench) closeHomeDownloadModal();
        setManualToggleVisibility(isFrench);
        if (homeSteamDlcLink) {
          const href = String(guide.steam_dlc || "").trim();
          if (href) homeSteamDlcLink.href = href;
        }
        if (homeManualVideoFrame) {
          const videoSrc = String(guide.manual_video_embed || homeManualVideoFrame.getAttribute("src") || "").trim();
          if (videoSrc) {
            homeManualVideoFrame.setAttribute("src", videoSrc);
            homeManualVideoFrame.dataset.initialSrc = videoSrc;
          }
        }
        applyTexts();
        if (homeManualVideoGroup) {
          const showVideo = lang() === "fr";
          homeManualVideoGroup.hidden = !showVideo;
          homeManualVideoGroup.style.display = showVideo ? "" : "none";
          homeManualVideoGroup.setAttribute("aria-hidden", showVideo ? "false" : "true");
        }
        bindEvents();
      }

      render();

      new MutationObserver(render).observe(document.documentElement, {
        attributes: true,
        attributeFilter: ["lang"]
      });
    })();
  </script>
  <script>
    window.__setAppReady?.();
  </script>
</body>
</html>
